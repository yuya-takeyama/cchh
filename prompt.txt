# Claude Code MCP Server Session ID Issue

## Context

I'm developing an MCP (Model Context Protocol) server for Claude Code that implements a custom `approval_prompt` tool. The goal is to send approval requests to a specific Slack thread when dangerous commands need approval.

### Current Implementation

1. **MCP Server Setup**:
   - Using stdio transport
   - Implements `approval_prompt` tool that gets called by Claude Code
   - Server is registered in Claude Code's config and launched with `--permission-prompt-tool`

2. **The Problem**:
   - I need to get the Claude Code session ID within the MCP server
   - Session ID is needed to find the corresponding Slack thread (stored in `~/.cchh/slack_threads/{session_id}.json`)
   - Currently unable to obtain the session ID

3. **What I've Tried**:
   - Checking environment variable `CCHH_CLAUDE_SESSION_ID` - not available
   - Looking in the `approval_prompt` tool arguments - session ID is not included
   - The tool receives: `tool_name`, `input` (tool parameters), and `tool_use_id`

### Technical Details

MCP server receives calls like this:
```json
{
  "tool_name": "WebFetch",
  "input": {
    "url": "https://example.com",
    "prompt": "..."
  },
  "tool_use_id": "some-uuid"
}
```

But no session information is included.

## Questions

1. **How can an MCP server obtain the Claude Code session ID?**
   - Is it passed during MCP server initialization?
   - Is it available through environment variables with a specific name?
   - Is there a standard way in the MCP protocol to get session/context information?

2. **Are there any alternative approaches to identify the Claude Code session from within an MCP server?**

3. **Does Claude Code provide any session context to MCP servers through the stdio transport or initialization handshake?**

## Additional Information

- Using official MCP Python SDK
- Claude Code version: latest
- MCP server communicates via stdio (JSON-RPC)
- The session ID exists somewhere because Claude Code's built-in hooks receive it in their event data

Please search for any documentation, examples, or discussions about:
- MCP protocol session handling
- Claude Code MCP server examples that use session information
- Environment variables or initialization data passed to MCP servers by Claude Code